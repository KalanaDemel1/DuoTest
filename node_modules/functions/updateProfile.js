var crypto = require('crypto');
var rand = require('csprng');
var mongoose = require('mongoose');
var gravatar = require('gravatar');
var user = require('functions/models');

exports.updateP = function(pno,password,firstname,lastname,email,OwnsVehicle,enableRideShare,gender,callback) {



    user.find({'pno':pno},function(err,users){

        if(users.length != 0){


            var phone = users[0].pno;
            var pass = users[0].password;
            var emil=users[0].email;
            var fname=users[0].firstname;
            var lname=users[0].lastname;
            var enableRS=users[0].enableRS;
            var ownsV=users[0].OwnsVehicle;
            var gnder=users[0].gender;




            user.update({pno:pno}, {"password" : pass,"email" : emil,"firstname" : fname, "lastname" : lname,"OwnsVehicle" : ownsV,"enableRS": enableRS,"gender" : gnder},{upsert:true},function(err){
                if(err) {
                    console.log(err);
                    callback({'response':"Database Error",'res':false});
                }
                else{
                    console.log('New Values Saved' );
                    callback({'response':"Sucess",'res':true});
                }
            });



        }
        else {

            callback({'response':"User does not exist",'res':false});

        }
    });
}
/**
 * Created by Kalana on 6/7/2015.
 */
