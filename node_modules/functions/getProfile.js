var crypto = require('crypto');
var rand = require('csprng');
var mongoose = require('mongoose');
var gravatar = require('gravatar');
var user = require('functions/models');

exports.getPr = function(pno,callback) {



    user.find({'pno':pno},function(err,users){

        if(users.length != 0){


            var phone = users[0].pno;
            var pass = users[0].password;
            var email=users[0].email;
            var fname=users[0].firstname;
            var lname=users[0].lastname;
            var enableRS=users[0].enableRS;
            var ownsV=users[0].OwnsVehicle;
            var gender=users[0].gender;


            if(phone == pno){

                callback({'response':"Sucess",'res':true,'phone':phone+" (Cannot be changed)",'password':pass,'email':email,'fname':fname,'lname':lname,'enableRS':enableRS,'ownsV':ownsV,'gender':gender});

            }else{

                callback({'response':"Database Error",'res':false});

            }
        }
        else {

            callback({'response':"User does not exist",'res':false});

        }
    });
}
